<!doctype html>
<html lang="es">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Validar Boleta ‚Äî Cine Kong</title>
<style>
  body{font-family:Poppins,system-ui,-apple-system,Segoe UI,Roboto,Arial;background:#fff9d6;margin:0;padding:40px;text-align:center}
  img{width:120px;margin-bottom:12px}
  h1{margin:6px 0 0}
  .msg{margin-top:20px;font-size:1.3rem;font-weight:700}
  .ok{color:green}
  .used{color:#c0392b}
  .info{margin-top:12px;color:#444}
  button{margin-top:18px;padding:10px 16px;border-radius:10px;border:none;background:#f0d000;font-weight:800;cursor:pointer}
</style>
</head>
<body>
  <img src="https://lupitalamejorperrita-bot.github.io/prueba/Cine_Logo.jpg" alt="Cine Kong">
  <h1>Verificaci√≥n de Boleta</h1>

  <div id="resultado" class="msg">Comprobando‚Ä¶</div>
  <div id="detalle" class="info"></div>

  <div>
    <button id="volver">Volver</button>
  </div>

<script>
  const params = new URLSearchParams(window.location.search);
  const codigo = params.get('codigo');

  const resultadoEl = document.getElementById('resultado');
  const detalleEl = document.getElementById('detalle');
  const volverBtn = document.getElementById('volver');
  volverBtn.addEventListener('click', ()=>{ window.location.href = '/prueba/CineKong/index.html'; });

  if(!codigo){
    resultadoEl.textContent = 'C√≥digo no v√°lido';
    resultadoEl.className = 'msg used';
    detalleEl.textContent = 'No se recibi√≥ ning√∫n c√≥digo en la URL.';
  } else {
    // clave en localStorage espec√≠fica por boleto
    const localKey = 'cinekong_boleto_' + codigo;

    // comprobar si ese c√≥digo ya est√° marcado como usado
    const estado = localStorage.getItem(localKey);

    if(estado === 'usado'){
      resultadoEl.innerHTML = '‚ö†Ô∏è Este boleto ya fue disfrutado';
      resultadoEl.className = 'msg used';
      detalleEl.textContent = `C√≥digo: ${codigo}`;
    } else {
      // marcar como usado ahora mismo
      localStorage.setItem(localKey, 'usado');
      resultadoEl.innerHTML = '‚úÖ Listo, disfruta tu funci√≥n üçø';
      resultadoEl.className = 'msg ok';
      detalleEl.textContent = `C√≥digo: ${codigo} (marcado como usado)`;
    }
  }
</script>
</body>
</html>