<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Cine Kong üçå</title>
  <style>
    body {
      font-family: 'Poppins', sans-serif;
      background-color: #000;
      color: #fff;
      margin: 0;
      padding: 0;
    }
    header {
      background-color: #ffcc00;
      color: #000;
      text-align: center;
      padding: 15px;
      font-size: 24px;
      font-weight: bold;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 10px;
    }
    header img {
      width: 60px;
      height: auto;
    }
    .cartelera {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      gap: 20px;
      padding: 20px;
    }
    .pelicula {
      background-color: #111;
      border-radius: 10px;
      overflow: hidden;
      box-shadow: 0 0 10px rgba(255, 204, 0, 0.3);
      text-align: center;
      cursor: pointer;
      transition: transform 0.2s;
    }
    .pelicula:hover { transform: scale(1.05); }
    .pelicula img {
      width: 100%;
      height: 300px;
      object-fit: cover;
    }
    .pelicula h3 { margin: 10px 0; }
    .modal {
      display: none;
      position: fixed;
      z-index: 10;
      left: 0; top: 0;
      width: 100%; height: 100%;
      background: rgba(0,0,0,0.8);
      justify-content: center;
      align-items: center;
    }
    .modal-content {
      background-color: #111;
      padding: 20px;
      border-radius: 10px;
      width: 90%;
      max-width: 700px;
      text-align: center;
      position: relative;
      box-shadow: 0 0 15px rgba(255, 204, 0, 0.4);
    }
    .modal-content iframe {
      width: 100%;
      height: 315px;
      border-radius: 10px;
      margin-bottom: 10px;
    }
    .close {
      position: absolute;
      top: 10px; right: 15px;
      font-size: 24px;
      cursor: pointer;
      color: #ffcc00;
    }
    select, input {
      padding: 8px;
      margin: 8px;
      border-radius: 5px;
      border: none;
    }
    .asientos-container {
      margin-top: 10px;
      text-align: center;
    }
    .pantalla {
      background: #ffcc00;
      color: #000;
      padding: 5px;
      margin: 10px auto;
      width: 60%;
      border-radius: 4px;
      font-weight: bold;
    }
    .asientos {
      display: grid;
      grid-template-columns: repeat(5, 1fr);
      gap: 6px;
      justify-content: center;
      max-width: 250px;
      margin: 0 auto;
    }
    .asiento {
      background: #222;
      border-radius: 4px;
      padding: 8px;
      cursor: pointer;
      transition: background 0.2s;
    }
    .asiento:hover { background: #ffcc00; color: #000; }
    .asiento.ocupado { background: red; cursor: not-allowed; }
    .asiento.seleccionado { background: #ffcc00; color: #000; }
    .boton-comprar {
      margin-top: 15px;
      background: #ffcc00;
      color: #000;
      padding: 10px 20px;
      border: none;
      border-radius: 6px;
      cursor: pointer;
      font-weight: bold;
      transition: 0.3s;
    }
    .boton-comprar:hover {
      background: #ffd633;
    }
  </style>
</head>
<body>
  <header>
    <img src="https://lupitalamejorperrita-bot.github.io/prueba/Cine_Logo.jpg" alt="Logo Cine Kong" />
    Cine Kong üçå
  </header>

  <section class="cartelera">
    <div class="pelicula" onclick="abrirModal('K-Pop Demon Hunters', 'https://www.youtube.com/embed/3KD_g7Czb6U', '7+', 'Un grupo de chicas K-pop que secretamente son cazadoras de demonios.')">
      <img src="https://m.media-amazon.com/images/M/MV5BNDQ0ZjhhMTItOTZhNC00YjA4LWI2ZDYtZGVjMjAzZjE4M2VlXkEyXkFqcGc@._V1_.jpg" alt="K-Pop Demon Hunters">
      <h3>K-Pop Demon Hunters</h3>
    </div>
    <div class="pelicula" onclick="abrirModal('Encanto', 'https://www.youtube.com/embed/CaimKeDcudo', 'TP', 'Una familia m√°gica vive en una casa encantada en Colombia.')">
      <img src="https://m.media-amazon.com/images/M/MV5BMmM5MDE0ZGUtYTVhMi00ZWEzLWJjZjQtMTE0OTkzZTcxNDMwXkEyXkFqcGc@._V1_FMjpg_UX1000_.jpg" alt="Encanto">
      <h3>Encanto</h3>
    </div>
  </section>

  <div id="modalPelicula" class="modal">
    <div class="modal-content">
      <span class="close" onclick="cerrarModal()">&times;</span>
      <h2 id="tituloPelicula"></h2>
      <iframe id="trailer" src="" allowfullscreen></iframe>
      <p><strong>Clasificaci√≥n:</strong> <span id="clasificacion"></span></p>
      <p id="descripcion"></p>
      <label>Selecciona fecha:</label>
      <input type="date" id="fecha" />
      <label>Selecciona hora:</label>
      <select id="hora"></select>
      <label>Tu nombre:</label>
      <input type="text" id="nombre" placeholder="Escribe tu nombre" />
      <div class="asientos-container">
        <div class="pantalla">üìΩÔ∏è Pantalla</div>
        <div id="asientos" class="asientos"></div>
      </div>
      <button class="boton-comprar" onclick="comprarBoleta()">Comprar Boleta üçø</button>
    </div>
  </div>

  <script>
    let peliculaSeleccionada = {};
    let asientoSeleccionado = null;
    let asientosOcupados = new Set();

    function abrirModal(titulo, trailer, clasif, desc) {
      peliculaSeleccionada = { titulo, trailer, clasif, desc };
      document.getElementById("tituloPelicula").innerText = titulo;
      document.getElementById("trailer").src = trailer + "?rel=0";
      document.getElementById("clasificacion").innerText = clasif;
      document.getElementById("descripcion").innerText = desc;

      const horas = generarHorasPorDia();
      const selectHoras = document.getElementById("hora");
      selectHoras.innerHTML = "";
      horas.forEach(h => {
        const opt = document.createElement("option");
        opt.textContent = h;
        selectHoras.appendChild(opt);
      });

      asientosOcupados = generarAsientosOcupados();
      actualizarCuadriculaAsientos();

      document.getElementById("modalPelicula").style.display = "flex";
    }

    function cerrarModal() {
      document.getElementById("modalPelicula").style.display = "none";
      document.getElementById("trailer").src = "";
    }

    function actualizarCuadriculaAsientos() {
      const cont = document.getElementById("asientos");
      cont.innerHTML = "";
      const filas = "ABCDEFGHIJK";
      filas.split("").forEach(f => {
        for (let n = 1; n <= 5; n++) {
          const div = document.createElement("div");
          const id = f + n;
          div.className = "asiento";
          div.textContent = id;
          if (asientosOcupados.has(id)) div.classList.add("ocupado");
          div.onclick = () => seleccionarAsiento(div, id);
          cont.appendChild(div);
        }
      });
    }

    function seleccionarAsiento(div, id) {
      if (div.classList.contains("ocupado")) return;
      document.querySelectorAll(".asiento").forEach(a => a.classList.remove("seleccionado"));
      div.classList.add("seleccionado");
      asientoSeleccionado = id;
    }

    function comprarBoleta() {
      const nombre = document.getElementById("nombre").value.trim();
      const fecha = document.getElementById("fecha").value;
      const hora = document.getElementById("hora").value;
      if (!nombre || !fecha || !hora || !asientoSeleccionado) {
        alert("Por favor, completa todos los campos y selecciona un asiento.");
        return;
      }
      const params = new URLSearchParams({
        pelicula: peliculaSeleccionada.titulo,
        nombre,
        fecha,
        hora,
        asiento: asientoSeleccionado
      });
      window.location.href = "boleta.html?" + params.toString();
    }

    // ----------- Horarios por d√≠a -----------
    function generarHorasPorDia() {
      const hoy = new Date().getDay(); // 0 = Domingo
      let rango = [];
      if (hoy >= 1 && hoy <= 4) rango = [9, 20];       // Lunes-Jueves
      else if (hoy === 5) rango = [12, 23];            // Viernes
      else rango = [9, 24];                            // S√°bado-Domingo

      const cantidad = Math.floor(Math.random() * 3) + 3;
      const horas = [];
      for (let i = 0; i < cantidad; i++) {
        const h = Math.floor(Math.random() * (rango[1] - rango[0])) + rango[0];
        const m = Math.random() > 0.5 ? "00" : "30";
        const suf = h >= 12 ? "PM" : "AM";
        const hora12 = h > 12 ? h - 12 : h;
        horas.push(`${hora12}:${m} ${suf}`);
      }
      return horas.sort((a, b) => convertirHora24(a) - convertirHora24(b));
    }

    function convertirHora24(hora12) {
      const [h, rest] = hora12.split(":");
      const [min, suf] = rest.split(" ");
      let hh = parseInt(h);
      if (suf === "PM" && hh !== 12) hh += 12;
      if (suf === "AM" && hh === 12) hh = 0;
      return hh * 60 + parseInt(min);
    }

    // ----------- Asientos aleatorios -----------
    function generarAsientosOcupados() {
      const ocupados = new Set();
      const filas = "ABCDEFGHIJK";
      const cantidad = Math.floor(Math.random() * 8) + 8;
      while (ocupados.size < cantidad) {
        const f = filas[Math.floor(Math.random() * filas.length)];
        const c = Math.floor(Math.random() * 5) + 1;
        ocupados.add(`${f}${c}`);
      }
      return ocupados;
    }
  </script>
</body>
</html>
