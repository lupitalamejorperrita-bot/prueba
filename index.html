<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>Tidalynx AR</title>
    <script src="https://aframe.io/releases/1.4.0/aframe.min.js"></script>
    <script src="https://cdn.rawgit.com/jeromeetienne/AR.js/2.2.1/aframe/build/aframe-ar.js"></script>
  </head>
  <body style="margin: 0; overflow: hidden;">
    <a-scene embedded arjs="sourceType: webcam;">
      
      <!-- Cámara -->
      <a-entity camera></a-entity>
      
      <!-- Marcador Hiro -->
      <a-marker type="hiro">
        <!-- Modelo de Tidalynx -->
        <a-entity id="tidalynx" 
                  gltf-model="https://lupitalamejorperrita-bot.github.io/prueba/tidalynx.glb" 
                  scale="0.5 0.5 0.5" 
                  position="0 0 0" 
                  rotation="0 0 0"
                  visible="false"></a-entity>
      </a-marker>

      <!-- Entidad de niebla -->
      <a-entity id="fog" visible="false">
        <a-sky color="black"></a-sky>
        <a-entity particle-system="preset: dust; color: #888; particleCount: 5000"></a-entity>
      </a-entity>

    </a-scene>

    <!-- Audio -->
    <audio id="audioStory" src="https://lupitalamejorperrita-bot.github.io/prueba/tidalynx.mp3" preload="auto"></audio>

    <script>
      const marker = document.querySelector("a-marker");
      const tidalynx = document.getElementById("tidalynx");
      const fog = document.getElementById("fog");
      const audioStory = document.getElementById("audioStory");

      marker.addEventListener("markerFound", () => {
        // Mensaje inicial
        setTimeout(() => {
          const quiere = confirm("¡Has encontrado a Tidalynx, el guardián de las mareas!\n¿Quieres conocer su historia?");
          if (quiere) {
            tidalynx.setAttribute("visible", "true");
            audioStory.play();
          } else {
            tidalynx.setAttribute("visible", "false");
            fog.setAttribute("visible", "true");
            alert("Entonces adiós...");
          }
        }, 500);
      });
    </script>
  </body>
</html>

